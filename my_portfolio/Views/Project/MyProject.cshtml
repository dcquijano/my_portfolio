@{
    ViewData["Title"] = "Projects";
    Layout = "_Layout";
}

<link rel="stylesheet" href="~/css/project.css" asp-append-version="true" />

<section class="projects-section">
    <div class="container">
        <h1 class="section-title">My Projects</h1>

        <div class="filter-section">
            <button class="filter-btn active">All</button>
            <button class="filter-btn">Web Development</button>
            @* <button class="filter-btn">Mobile Apps</button>
            <button class="filter-btn">UI/UX Design</button> *@
        </div>

        <div class="row">
            <!-- Project Card 1 -->
            <div class="col-lg-4 col-md-6" data-category="Web Development">
                <div class="project-card">
                    <div class="project-image" data-project="project1">
                        <img src="/img/timeinout.png" alt="Project 1" />
                        <div class="project-overlay">
                            <span class="view-project">View Project</span>
                        </div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">OJT Monitoring System</h3>
                        <p class="project-description">
                            OJT Monitoring System
                            The OJT Monitoring System is a web-based application developed using ASP.NET Core MVC framework. It aims to streamline and automate the process of monitoring and managing on-the-job training programs within an organization. The system provides a centralized platform for administrators, supervisors, and trainees to track progress, communicate, and generate reports.
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Web Development</span>
                            <span class="tech-tag">ASP.NET Core</span>
                            <span class="tech-tag">C#</span>
                            <span class="tech-tag">HTML</span>
                            <span class="tech-tag">CSS</span>
                            <span class="tech-tag">SQL Server</span>
                            <span class="tech-tag">Bootstrap</span>
                            <span class="tech-tag">JavaScript</span>
                        </div>
                        <div class="project-links">
                            <a href="#" class="project-link">
                                <i class="fas fa-external-link-alt"></i> Live Demo
                            </a>
                            <a href="https://github.com/dcquijano/OjtTimeSheetMonitoringSystem" class="project-link">
                                <i class="fab fa-github"></i> Source Code
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            @*  <!-- Project Card 2 -->
            <div class="col-lg-4 col-md-6" data-category="Web Development">
                <div class="project-card">
                    <div class="project-image" data-project="project2">
                        <img src="/img/home.png" alt="Project 2" />
                        <div class="project-overlay">
                            <span class="view-project">View Project</span>
                        </div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Porfolio</h3>
                        <p class="project-description">
                            A portfolio website is a showcase of an individual's or company's work, skills, and achievements. It serves as a digital platform to present projects, expertise, and professional background to potential clients, employers, or collaborators. By leveraging the ASP.NET Core MVC framework, you can create a dynamic and interactive portfolio website with a wide range of features.
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Web Development</span>
                            <span class="tech-tag">ASP.NET Core</span>
                            <span class="tech-tag">C#</span>
                            <span class="tech-tag">HTML</span>
                            <span class="tech-tag">CSS</span>
                            <span class="tech-tag">Bootstrap</span>
                            <span class="tech-tag">JavaScript</span>
                        </div>
                        <div class="project-links">
                            <a href="#" class="project-link">
                                <i class="fas fa-external-link-alt"></i> Live Demo
                            </a>
                            <a href="https://github.com/dcquijano/my_portfolio" class="project-link">
                                <i class="fab fa-github"></i> Source Code
                            </a>
                        </div>
                    </div>
                </div>
            </div>
 *@

            <!-- Project Card 3 -->
            <div class="col-lg-4 col-md-6" data-category="Web Development">
                <div class="project-card">
                    <div class="project-image" data-project="project3">
                        <img src="/img/grp3login.png" alt="Project 3" />
                        <div class="project-overlay">
                            <span class="view-project">View Project</span>
                        </div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Group 3 System</h3>
                        <p class="project-description">
                            It's essential to have a well-organized structure and grouping system to ensure a logical and user-friendly experience. A grouping system helps in organizing the content, functionality, and navigation of the website.
                            <div class="project-tech">
                                <span class="tech-tag">Web Development</span>
                                <span class="tech-tag">HTML</span>
                                <span class="tech-tag">CSS</span>
                                <span class="tech-tag">Bootstrap</span>
                                <span class="tech-tag">JavaScript</span>
                            </div>
                            <div class="project-links">
                                <a href="https://group3-psi.vercel.app/" class="project-link">
                                    <i class="fas fa-external-link-alt"></i> Live Demo
                                </a>
                                <a href="https://github.com/dcquijano/group3" class="project-link">
                                    <i class="fab fa-github"></i> Source Code
                                </a>
                            </div>
                    </div>
                </div>
            </div>

            @* 
            <!-- Project Card 4 -->
            <div class="col-lg-4 col-md-6" data-category="Mobile Apps">
                <div class="project-card">
                    <div class="project-image" data-project="project4">
                        <img src="/img/img.jpg" alt="Project 4" />
                        <div class="project-overlay">
                            <span class="view-project">View Project</span>
                        </div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Task Management App</h3>
                        <p class="project-description">
                            A collaborative task management application with real-time updates, user roles,
                            and project analytics.
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Mobile Apps</span>
                            <span class="tech-tag">React</span>
                            <span class="tech-tag">ASP.NET Core</span>
                            <span class="tech-tag">SignalR</span>
                            <span class="tech-tag">Azure</span>
                        </div>
                        <div class="project-links">
                            <a href="#" class="project-link">
                                <i class="fas fa-external-link-alt"></i> Live Demo
                            </a>
                            <a href="#" class="project-link">
                                <i class="fab fa-github"></i> Source Code
                            </a>
                        </div>
                    </div>
                </div>
            </div> *@

            @*   <!-- Project Card 5 -->
            <div class="col-lg-4 col-md-6" data-category="UI/UX Design">
                <div class="project-card">
                    <div class="project-image" data-project="project5">
                        <img src="/img/img.jpg" alt="Project 5" />
                        <div class="project-overlay">
                            <span class="view-project">View Project</span>
                        </div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Fitness Tracker</h3>
                        <p class="project-description">
                            A mobile-responsive fitness tracking application with workout plans,
                            progress monitoring, and social features.
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">UI/UX Design</span>
                            <span class="tech-tag">Blazor</span>
                            <span class="tech-tag">.NET MAUI</span>
                            <span class="tech-tag">Entity Framework</span>
                            <span class="tech-tag">Charts.js</span>
                        </div>
                        <div class="project-links">
                            <a href="#" class="project-link">
                                <i class="fas fa-external-link-alt"></i> Live Demo
                            </a>
                            <a href="#" class="project-link">
                                <i class="fab fa-github"></i> Source Code
                            </a>
                        </div>
                    </div>
                </div>
            </div> *@
        </div>
    </div>

    <!-- Modern Image Modal -->
    <div class="image-modal" id="imageModal">
        <div class="modal-overlay"></div>
        <button class="close-modal">
            <i class="fas fa-times"></i>
            <span>Exit</span>
        </button>
        <div class="modal-content">
            <button class="nav-btn prev-btn" title="Previous">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="modal-image-wrapper">
                <div class="modal-image-container">
                    <img src="" id="modalImage" class="modal-image" alt="Project Image">
                </div>
                <div class="image-counter">
                    <span id="currentImageNum">1</span> / <span id="totalImages">4</span>
                </div>
            </div>
            <button class="nav-btn next-btn" title="Next">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="modal-thumbnails"></div>
    </div>
</section>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Filter buttons functionality
            $('.filter-btn').click(function () {
                const category = $(this).text().trim();
                $('.filter-btn').removeClass('active');
                $(this).addClass('active');

                if (category === 'All') {
                    $('.col-lg-4').fadeIn(300);
                } else {
                    $('.col-lg-4').fadeOut(200);
                    setTimeout(() => {
                        $(`.col-lg-4[data-category="${category}"]`).fadeIn(300);
                    }, 200);
                }
            });

            // Modal functionality
            const modal = $('#imageModal');
            const modalImg = $('#modalImage');
            const closeBtn = $('.close-modal');
            const prevBtn = $('.prev-btn');
            const nextBtn = $('.next-btn');
            const thumbnailsContainer = $('.modal-thumbnails');

            let currentProjectImages = [];
            let currentImageIndex = 0;

            const projectImages = {
                'project1': [
                    '/img/login.png',
                    '/img/forgotpassword.png',
                    '/img/dashboard.png',
                    '/img/school.png',
                    '/img/ojt.png',
                    '/img/attendance.png',
                    '/img/task.png',
                    '/img/criteria.png',
                    '/img/evaluationcriteria.png',
                    '/img/taskreport.png',
                    '/img/userrole.png',
                    '/img/admin.png'
                ],
                'project2': [
                    '/img/project.png',
                    '/img/about.png',
                    '/img/contact.png'
                ],
                'project3': [
                    '/img/grp3home.png',
                    '/img/grp3feature.png',
                    '/img/grp3blog.png',
                    '/img/grp3aboutus.png'
                ],
                'project4': [
                    '/img/img.jpg',
                    '/img/img.jpg',
                    '/img/img.jpg',
                    '/img/img.jpg'
                ],
                'project5': [
                    '/img/img.jpg',
                    '/img/img.jpg',
                    '/img/img.jpg',
                    '/img/img.jpg'
                ],
            };

            $('.project-image').click(function () {
                const projectId = $(this).data('project');
                currentProjectImages = projectImages[projectId];
                currentImageIndex = 0;
                openModal(currentProjectImages[0]);
            });

            function openModal(imageSrc) {
                modal.addClass('active').fadeIn(300);
                modalImg.attr('src', imageSrc).hide().fadeIn(300);
                $('#currentImageNum').text(currentImageIndex + 1);
                $('#totalImages').text(currentProjectImages.length);
                updateThumbnails();
                $('body').css('overflow', 'hidden');
            }

            function updateThumbnails() {
                thumbnailsContainer.empty();
                currentProjectImages.forEach((img, index) => {
                    const thumb = $('<img>', {
                        src: img,
                        class: 'thumbnail' + (index === currentImageIndex ? ' active' : ''),
                        click: () => changeImage(index)
                    });
                    thumbnailsContainer.append(thumb);
                });
            }

            function changeImage(newIndex) {
                modalImg.fadeOut(150, function () {
                    currentImageIndex = newIndex;
                    $(this).attr('src', currentProjectImages[newIndex]).fadeIn(150);
                    $('#currentImageNum').text(newIndex + 1);
                    updateThumbnails();
                });
            }

            function closeModal() {
                modal.fadeOut(300, function () {
                    $(this).removeClass('active');
                    $('body').css('overflow', 'auto');
                });
            }

            closeBtn.click(closeModal);
            modal.click(function (e) {
                if (e.target === this || $(e.target).hasClass('modal-overlay')) {
                    closeModal();
                }
            });

            prevBtn.click(function () {
                let newIndex = (currentImageIndex - 1 + currentProjectImages.length) % currentProjectImages.length;
                changeImage(newIndex);
            });

            nextBtn.click(function () {
                let newIndex = (currentImageIndex + 1) % currentProjectImages.length;
                changeImage(newIndex);
            });

            $(document).keydown(function (e) {
                if (modal.is(':visible')) {
                    switch (e.key) {
                        case 'ArrowLeft':
                            prevBtn.click();
                            break;
                        case 'ArrowRight':
                            nextBtn.click();
                            break;
                        case 'Escape':
                            closeModal();
                            break;
                    }
                }
            });

            $('.modal-image, .thumbnail').on('dragstart', function (e) {
                e.preventDefault();
            });

            let touchStartX = 0;
            let touchEndX = 0;

            modalImg.on('touchstart', function (e) {
                touchStartX = e.touches[0].clientX;
            });

            modalImg.on('touchmove', function (e) {
                touchEndX = e.touches[0].clientX;
            });

            modalImg.on('touchend', function () {
                const swipeThreshold = 50;
                const swipeLength = touchEndX - touchStartX;

                if (Math.abs(swipeLength) > swipeThreshold) {
                    if (swipeLength > 0) {
                        prevBtn.click();
                    } else {
                        nextBtn.click();
                    }
                }
            });
        });
    </script>
}